
// Literales
var MSG_VUELVE_A_INTRODUCIR = 'Por favor, vuelve ha introducir el campo ';
var MSG_GUARDADO = 'Guardado correctamente';

// Valores
var SITUACION_NUEVO_REGISTRO = 'NUEVO REGISTRO';
var SITUACION_FICHA_DEFECTO = 'CONSULTA';
var SITUACION_VISITA_CONCERTADA = 'Visita concertada';

// Librerias
var LIB_CENTROS = 'Centros';
var LIB_FICHA = 'Ficha';
var LIB_VISITA = 'Control visita';
var LIB_PRESION = 'Presión arterial';

// Campos por libreria

// Campos Centros
var LIB_CENTROS_CAMPO_CODIGO_CLIENTE = 'Código cliente';
var LIB_CENTROS_CAMPO_NOMBRE_COMERCIAL = 'Nombre Comercial';
var LIB_CENTROS_CAMPO_RAZON_SOCIAL = 'Razón social';
var LIB_CENTROS_CAMPO_DIRECCION = 'Dirección';
var LIB_CENTROS_CAMPO_POBLACION = 'Población';
var LIB_CENTROS_CAMPO_PROVINCIA = 'Província';
var LIB_CENTROS_CAMPO_CODIGO_POSTAL = 'Código Postal';
var LIB_CENTROS_CAMPO_TELEFONO = 'Teléfono';
var LIB_CENTROS_CAMPO_MOVIL = 'Movil';
var LIB_CENTROS_CAMPO_EMAIL = 'Email';
var LIB_CENTROS_CAMPO_DELEGADO_ASIGNADO = 'Delegado asignado';
var LIB_CENTROS_CAMPO_DIETISTA_ASIGNADA = 'Dietista asignada';
var LIB_CENTROS_CAMPO_PERSONAS_DE_CONTACTO = 'Personas de contacto';
var LIB_CENTROS_CAMPO_FICHA_CLIENTE = 'Ficha cliente';
var LIB_CENTROS_CAMPO_IDCENTRO = 'idCentro';
var LIB_CENTROS_CAMPO_IDDELEGADO = 'idDelegado';
var LIB_CENTROS_CAMPO_IDDIETISTA = 'iddietista';


// Campos Ficha
var LIB_FICHA_CAMPO_IDPACIENTE = 'idPaciente';

var LIB_FICHA_CAMPO_ACEPTACION = 'Aceptación';
var LIB_FICHA_CAMPO_ACEPTADAS_CONDICIONES = 'Aceptadas condiciones';
var LIB_FICHA_CAMPO_VER_DOCUMENTO_PROTECCION_DE_DATOS = 'Ver documento Protección de datos';
var LIB_FICHA_CAMPO_QUIEN_LE_RECOMENDO_EL_TRATAMIENTO = 'Quien le recomendo el tratamiento';
var LIB_FICHA_CAMPO_FECHA_ALTA = 'Fecha alta';
var LIB_FICHA_CAMPO_OTROS = 'Otros';
var LIB_FICHA_CAMPO_SITUACION = 'Situación';
var LIB_FICHA_CAMPO_NOMBRE = 'Nombre';
var LIB_FICHA_CAMPO_APELLIDOS = 'Apellidos';
var LIB_FICHA_CAMPO_DNI = 'D.N.I.';
var LIB_FICHA_CAMPO_SEXO = 'Sexo';
var LIB_FICHA_CAMPO_FECHA_DE_NACIMIENTO = 'Fecha de nacimiento';
var LIB_FICHA_CAMPO_DIRECCION = 'Dirección';
var LIB_FICHA_CAMPO_CODIGO_POSTAL = 'Código Postal';
var LIB_FICHA_CAMPO_POBLACION = 'Población';
var LIB_FICHA_CAMPO_TELEFONO = 'Teléfono';
var LIB_FICHA_CAMPO_MOVIL = 'Movil';
var LIB_FICHA_CAMPO_EMAIL = 'Email';
var LIB_FICHA_CAMPO_PATOLOGIAS_DIAGNOSTICADAS = 'Patologías diagnosticadas';
var LIB_FICHA_CAMPO_OTRAS_PATOLOGIAS = 'Otras patologías';
var LIB_FICHA_CAMPO_MEDICACION_OTRAS_PATOLOGIAS = 'Medicación Otras patologías';
var LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_OTRAS_PATOLOGIAS = 'Tipo de medicación Otras patologías';
var LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_OTRAS_PATOLOGIAS = 'Complementos alimenticios otras patologías';
var LIB_FICHA_CAMPO_COM_OTRAS = 'com Otras';
var LIB_FICHA_CAMPO_ARTICULAR = 'Articular';
var LIB_FICHA_CAMPO_MEDICACION_ARTICULAR = 'Medicación Articular';
var LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_ARTICULAR = 'Tipo de medicación Articular';
var LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_ARTICULAR = 'Complementos alimenticios articular';
var LIB_FICHA_CAMPO_COM_ARTICULAR = 'com Articular';
var LIB_FICHA_CAMPO_CIRCULATORIA = 'Circulatoria';
var LIB_FICHA_CAMPO_MEDICACION_CIRCULATORIA = 'Medicación Circulatoria';
var LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_CIRCULATORIA = 'Tipo de medicación Circulatoria';
var LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_CIRCULATORIA = 'Complementos alimenticios circulatoria';
var LIB_FICHA_CAMPO_COM_CIRCULATORIA = 'com Circulatoria';
var LIB_FICHA_CAMPO_CUTANEA = 'Cutanea';
var LIB_FICHA_CAMPO_MEDICACION_CUTANEA = 'Medicación Cutanea';
var LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_CUTANEO = 'Tipo de medicación Cutaneo';
var LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_CUTANEA = 'Complementos alimenticios Cutanea';
var LIB_FICHA_CAMPO_COM_CUTANEA = 'com Cutanea';
var LIB_FICHA_CAMPO_DIGESTIVA = 'Digestiva';
var LIB_FICHA_CAMPO_MEDICACION_DIGESTIVA = 'Medicación Digestiva';
var LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_DIGESTIVA = 'Tipo de medicación Digestiva';
var LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_DIGESTIVA = 'Complementos alimenticios Digestiva';
var LIB_FICHA_CAMPO_COM_DIGESTIVA = 'com Digestiva';
var LIB_FICHA_CAMPO_METABOLICA = 'Metabolica';
var LIB_FICHA_CAMPO_MEDICACION_METABOLICA = 'Medicación Metabolica';
var LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_METABOLICA = 'Tipo de medicación Metabolica';
var LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_METABOLICA = 'Complementos alimenticios Metabolica';
var LIB_FICHA_CAMPO_COM_METABOLICA = 'com Metabolica';
var LIB_FICHA_CAMPO_RESPIRATORIA = 'Respiratoria';
var LIB_FICHA_CAMPO_MEDICACION_RESPIRATORIA = 'Medicación Respiratoria';
var LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_RESPIRATORIA = 'Tipo de medicación Respiratoria';
var LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_RESPIRATORIA = 'Complementos alimenticios Respiratoria';
var LIB_FICHA_CAMPO_COM_RESPIRATORIA = 'com Respiratoria';
var LIB_FICHA_CAMPO_SISTEMA_NERVIOSO = 'Sistema nervioso';
var LIB_FICHA_CAMPO_MEDICACION_SISTEMA_NERVIOSO = 'Medicación Sistema Nervioso';
var LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_SISTEMA_NERVIOSO = 'Tipo de medicación Sistema Nervioso';
var LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_SISTEMA_NERVIOSO = 'Complementos alimenticios Sistema Nervioso';
var LIB_FICHA_CAMPO_COM_SISTEMA_NERVIOSO = 'com Sistema Nervioso';
var LIB_FICHA_CAMPO_TRANSTORNOS_PSICOLOGICOS = 'Transtornos Psicológicos';
var LIB_FICHA_CAMPO_MEDICACION_TRANSTORNOS_PSICOLOGICOS = 'Medicación Transtornos Psicológicos';
var LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_TRANSTORNOS_PSICOLOGICOS = 'Tipo de medicación Transtornos Psicológicos';
var LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_TRANSTORNOS_PSICOLOGICOS = 'Complementos alimenticios Transtornos Psicológicos';
var LIB_FICHA_CAMPO_COM_TRANSTORNOS_PSICOLOGICOS = 'com Transtornos Psicológicos';
var LIB_FICHA_CAMPO_INTERVENCIONES_QUIRURJICAS = 'Intervenciones Quirurjicas';
var LIB_FICHA_CAMPO_PRESION_ARTERIAL = 'Presión arterial';
var LIB_FICHA_CAMPO_MEDICIONES_PRESION_ARTERIAL = 'Mediciones Presión arterial';
var LIB_FICHA_CAMPO_COLESTEROL = 'Colesterol';
var LIB_FICHA_CAMPO_HDL = 'HDL';
var LIB_FICHA_CAMPO_LDL = 'LDL';
var LIB_FICHA_CAMPO_COLESTEROL_TOTAL = 'Colesterol total';
var LIB_FICHA_CAMPO_TRIGLICERIDOS = 'Triglicéridos';
var LIB_FICHA_CAMPO_AÑADIR_INFORMACION_DE_OTROS_DATOS_ANALITICOS = 'Añadir Información de otros datos analíticos';
var LIB_FICHA_CAMPO_MOSTRAR_ANALITICA = 'Mostrar Analitica';
var LIB_FICHA_CAMPO_IMG_ANALITICA = 'Img analitica';
var LIB_FICHA_CAMPO_ALERGIAS = 'Alergias';
var LIB_FICHA_CAMPO_ALERGIAS__ALIMENTICIAS = 'Alergias  Alimenticias';
var LIB_FICHA_CAMPO_ALERGIAS_MEDICAMENTOSAS = 'Alergias Medicamentosas';
var LIB_FICHA_CAMPO_ALERGIAS_OTRAS = 'Alergias Otras';
var LIB_FICHA_CAMPO_INTOLERANCIAS_ALIMENTICIAS = 'Intolerancias alimenticias';
var LIB_FICHA_CAMPO_OTRAS_INTOLERANCIAS = 'Otras Intolerancias';
var LIB_FICHA_CAMPO_CAMINAR = 'Caminar';
var LIB_FICHA_CAMPO_DEPORTES = 'Deportes';
var LIB_FICHA_CAMPO_DEPORTE_QUE_PRACTICA = 'Deporte que practica';
var LIB_FICHA_CAMPO_DESAYUNO = 'Desayuno';
var LIB_FICHA_CAMPO_HORA_DESAYUNO = 'Hora desayuno';
var LIB_FICHA_CAMPO_MÈDIA_MAÑANA = 'Mèdia mañana';
var LIB_FICHA_CAMPO_HORARIO_MEDIA_MAÑANA = 'Horario media mañana';
var LIB_FICHA_CAMPO_COMIDA = 'Comida';
var LIB_FICHA_CAMPO_HORA_COMIDA = 'Hora comida';
var LIB_FICHA_CAMPO_MERIENDA = 'Merienda';
var LIB_FICHA_CAMPO_HORA_MERIENDA = 'Hora merienda';
var LIB_FICHA_CAMPO_CENA = 'Cena';
var LIB_FICHA_CAMPO_HORA_CENA = 'Hora cena';
var LIB_FICHA_CAMPO_CONSUMO_DE_LACTEOS = 'Consumo de Lacteos';
var LIB_FICHA_CAMPO_CONSUMO_DE_FRUTA = 'Consumo de Fruta';
var LIB_FICHA_CAMPO_CONSUMO_DE_LEGUMBRES = 'Consumo de Legumbres';
var LIB_FICHA_CAMPO_CONSUMO_DE_PASTA = 'Consumo de Pasta';
var LIB_FICHA_CAMPO_CONSUMO_DE_ARROZ = 'Consumo de Arroz';
var LIB_FICHA_CAMPO_CONSUMO_DE_VERDURA = 'Consumo de Verdura';
var LIB_FICHA_CAMPO_CONSUMO_DE_ENSALADA = 'Consumo de Ensalada';
var LIB_FICHA_CAMPO_CONSUMO_DE_CARNE = 'Consumo de Carne';
var LIB_FICHA_CAMPO_CONSUMO_DE_PESCADO = 'Consumo de Pescado';
var LIB_FICHA_CAMPO_CONSUMO_DIARIO_DE_AGUA = 'Consumo diario de agua';
var LIB_FICHA_CAMPO_INTENTAR_NO_INCLUIR_EN_LAS_DIETAS = 'Intentar no incluir en las dietas';
var LIB_FICHA_CAMPO_ANSIEDAD = 'Ansiedad';
var LIB_FICHA_CAMPO_TIPO_DE_ANSIEDAD = 'Tipo de Ansiedad';
var LIB_FICHA_CAMPO_ANSIEDAD_OTROS = 'Ansiedad Otros';
var LIB_FICHA_CAMPO_EN_QUE_MOMENTO_DEL_DIA_SE_PRODUCTE_LA_ANSIEDAD = 'En que momento del día se producte la ansiedad';
var LIB_FICHA_CAMPO_WC = 'WC';
var LIB_FICHA_CAMPO_WC_OTROS = 'WC Otros';
var LIB_FICHA_CAMPO_REGLAS = 'Reglas';
var LIB_FICHA_CAMPO_REGLAS_OTRAS = 'Reglas Otras';
var LIB_FICHA_CAMPO_ALTURA = 'Altura';
var LIB_FICHA_CAMPO_VISITA = 'Visita';
var LIB_FICHA_CAMPO_HISTORICO = 'Histórico';
var LIB_FICHA_CAMPO_IDCENTRO = 'idCentro';
var LIB_FICHA_CAMPO_IDDIETISTA = 'iddietista';
var LIB_FICHA_CAMPO_FILTRO = 'filtro';

// Campos visita
var LIB_VISITA_CAMPO_DFICHPACIENTE = 'dFichPaciente';
var LIB_VISITA_CAMPO_FECHA_VISITA = 'Fecha visita';
var LIB_VISITA_CAMPO_HORA_VISTA = 'Hora vista';
var LIB_VISITA_CAMPO_SITUACION = 'Situación';
var LIB_VISITA_CAMPO_EDAD = 'Edad';
var LIB_VISITA_CAMPO_ALTURA = 'Altura';
var LIB_VISITA_CAMPO_INDICE_DE_MASA_CORPORAL = 'INDICE DE MASA CORPORAL';
var LIB_VISITA_CAMPO_PESO = 'Peso';
var LIB_VISITA_CAMPO_CONTORNO_PECHO = 'Contorno Pecho';
var LIB_VISITA_CAMPO_CONTORNO_CINTURA = 'Contorno Cintura';
var LIB_VISITA_CAMPO_CONTORNO_CADERAS = 'Contorno Caderas';
var LIB_VISITA_CAMPO_CONTORNO_MUSLOS = 'Contorno muslos';
var LIB_VISITA_CAMPO_CONTORNO_BRAZOS = 'Contorno brazos';
var LIB_VISITA_CAMPO_CONTORNO_BARRIGA = 'Contorno barriga';
var LIB_VISITA_CAMPO_OBSERVACIONES_DE_LA_VISITA = 'Observaciones de la visita';
var LIB_VISITA_CAMPO_DIETA_ANTERIOR = 'Dieta Anterior';
var LIB_VISITA_CAMPO_DIETA_ASIGNADA = 'Dieta Asignada';
var LIB_VISITA_CAMPO_COMPLEMENTO_ANTERIOR = 'Complemento Anterior';
var LIB_VISITA_CAMPO_COMPLEMENTOS_PRESCRITOS = 'Complementos Prescritos';
var LIB_VISITA_CAMPO_HOY = 'hoy';
var LIB_VISITA_CAMPO_CALCULATION = 'Calculation';
var LIB_VISITA_CAMPO_PATOLOGIAS_DIAGNOSTICADAS = 'Patologías diagnosticadas';
var LIB_VISITA_CAMPO_PATOLOGIA = 'Patología';
var LIB_VISITA_CAMPO_MEDICACION_FARMACOLOGICA = 'Medicación farmacologica';
var LIB_VISITA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_COMPETENCIA = 'Complementos alimenticios competencia';
var LIB_VISITA_CAMPO_INTERVENCIONES_QUIRURGICAS = 'Intervenciones Quirúrgicas';
var LIB_VISITA_CAMPO_P_ARTERIAL = 'P Arterial';
var LIB_VISITA_CAMPO_PRESION_ARTERIAL = 'Presión Arterial';
var LIB_VISITA_CAMPO_MEDICION = 'Medición';
var LIB_VISITA_CAMPO_COLESTEROL_HDL = 'Colesterol HDL';
var LIB_VISITA_CAMPO_COLESTEROL_LDL = 'Colesterol LDL';
var LIB_VISITA_CAMPO_COLESTEROL_TOTAL = 'Colesterol Total';
var LIB_VISITA_CAMPO_TRIGLICERIDOS = 'Triglicéridos';
var LIB_VISITA_CAMPO_OTROS_DATOS_ANALITICAS = 'Otros datos Analitícas';
var LIB_VISITA_CAMPO_ALERGIAS = 'Alergias';
var LIB_VISITA_CAMPO_ALERGENOS = 'Alérgenos';
var LIB_VISITA_CAMPO_INTOLERANCIAS_ALIMENTICIAS = 'Intolerancias alimenticias';
var LIB_VISITA_CAMPO_LACTEOS = 'lacteos';
var LIB_VISITA_CAMPO_FRUTA = 'Fruta';
var LIB_VISITA_CAMPO_LEGUMBRES = 'Legumbres';
var LIB_VISITA_CAMPO_PASTA = 'Pasta';
var LIB_VISITA_CAMPO_ARROZ = 'Arroz';
var LIB_VISITA_CAMPO_VERDURA = 'Verdura';
var LIB_VISITA_CAMPO_ENSALADA = 'Ensalada';
var LIB_VISITA_CAMPO_CARNE = 'Carne';
var LIB_VISITA_CAMPO_PESCADO = 'Pescado';
var LIB_VISITA_CAMPO_NO_INCLUIR_EN_LAS_DIETAS = 'No incluir en las dietas';
var LIB_VISITA_CAMPO_CONSUMO_DE_AGUA_DIARIO = 'Consumo de agua diario';
var LIB_VISITA_CAMPO_ANSIEDAD = 'Ansiedad';
var LIB_VISITA_CAMPO_TIPO_DE_ANSIEDAD = 'Tipo de Ansiedad';
var LIB_VISITA_CAMPO_EN_QUE_MOMENTO_DEL_DIA = 'En que momento del día';
var LIB_VISITA_CAMPO_W_C = 'W. C.';
var LIB_VISITA_CAMPO_REGLAS = 'Reglas';
var LIB_VISITA_CAMPO_CONTROL_VISITA = 'Control visita';
var LIB_VISITA_CAMPO_FILTRO = 'filtro';
var LIB_VISITA_CAMPO_DDIETISTA = 'dDietista';
var LIB_VISITA_CAMPO_DCENTRO = 'dCentro';
var LIB_VISITA_CAMPO_PECHO = 'pecho';
var LIB_VISITA_CAMPO_CINTURA = 'cintura';
var LIB_VISITA_CAMPO_CADERAS = 'caderas';
var LIB_VISITA_CAMPO_MUSLOS = 'muslos';
var LIB_VISITA_CAMPO_BRAZOS = 'brazos';
var LIB_VISITA_CAMPO_BARRIGA = 'barriga';

// Campos presion
var LIB_PRESION_CAMPO_IDPRESION = 'idPresion';
var LIB_PRESION_CAMPO_FECHA = 'Fecha';
var LIB_PRESION_CAMPO_SISTOLICA = 'Sistolica';
var LIB_PRESION_CAMPO_DIASTOLICA = 'Diastolica';
var LIB_PRESION_CAMPO_SITUACION = 'Situación';
var LIB_PRESION_CAMPO_FILTRO = 'filtro';
var LIB_PRESION_CAMPO_IDFICHA = 'idFicha';
var LIB_PRESION_CAMPO_IDDIETISTA = 'iddietista';


// Array campos copiables ficha
var CAMPOS_FICHA = [
    LIB_FICHA_CAMPO_ACEPTACION, LIB_FICHA_CAMPO_ACEPTADAS_CONDICIONES, LIB_FICHA_CAMPO_VER_DOCUMENTO_PROTECCION_DE_DATOS, LIB_FICHA_CAMPO_QUIEN_LE_RECOMENDO_EL_TRATAMIENTO, LIB_FICHA_CAMPO_FECHA_ALTA, LIB_FICHA_CAMPO_OTROS, LIB_FICHA_CAMPO_SITUACION, LIB_FICHA_CAMPO_NOMBRE, LIB_FICHA_CAMPO_APELLIDOS, LIB_FICHA_CAMPO_DNI, LIB_FICHA_CAMPO_SEXO, LIB_FICHA_CAMPO_FECHA_DE_NACIMIENTO, LIB_FICHA_CAMPO_DIRECCION, LIB_FICHA_CAMPO_CODIGO_POSTAL, LIB_FICHA_CAMPO_POBLACION, LIB_FICHA_CAMPO_TELEFONO, LIB_FICHA_CAMPO_MOVIL, LIB_FICHA_CAMPO_EMAIL, LIB_FICHA_CAMPO_PATOLOGIAS_DIAGNOSTICADAS, LIB_FICHA_CAMPO_OTRAS_PATOLOGIAS, LIB_FICHA_CAMPO_MEDICACION_OTRAS_PATOLOGIAS, LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_OTRAS_PATOLOGIAS, LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_OTRAS_PATOLOGIAS, LIB_FICHA_CAMPO_COM_OTRAS, LIB_FICHA_CAMPO_ARTICULAR, LIB_FICHA_CAMPO_MEDICACION_ARTICULAR, LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_ARTICULAR, LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_ARTICULAR, LIB_FICHA_CAMPO_COM_ARTICULAR, LIB_FICHA_CAMPO_CIRCULATORIA, LIB_FICHA_CAMPO_MEDICACION_CIRCULATORIA, LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_CIRCULATORIA, LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_CIRCULATORIA, LIB_FICHA_CAMPO_COM_CIRCULATORIA, LIB_FICHA_CAMPO_CUTANEA, LIB_FICHA_CAMPO_MEDICACION_CUTANEA, LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_CUTANEO, LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_CUTANEA, LIB_FICHA_CAMPO_COM_CUTANEA, LIB_FICHA_CAMPO_DIGESTIVA, LIB_FICHA_CAMPO_MEDICACION_DIGESTIVA, LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_DIGESTIVA, LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_DIGESTIVA, LIB_FICHA_CAMPO_COM_DIGESTIVA, LIB_FICHA_CAMPO_METABOLICA, LIB_FICHA_CAMPO_MEDICACION_METABOLICA, LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_METABOLICA, LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_METABOLICA, LIB_FICHA_CAMPO_COM_METABOLICA, LIB_FICHA_CAMPO_RESPIRATORIA, LIB_FICHA_CAMPO_MEDICACION_RESPIRATORIA, LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_RESPIRATORIA, LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_RESPIRATORIA, LIB_FICHA_CAMPO_COM_RESPIRATORIA, LIB_FICHA_CAMPO_SISTEMA_NERVIOSO, LIB_FICHA_CAMPO_MEDICACION_SISTEMA_NERVIOSO, LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_SISTEMA_NERVIOSO, LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_SISTEMA_NERVIOSO, LIB_FICHA_CAMPO_COM_SISTEMA_NERVIOSO, LIB_FICHA_CAMPO_TRANSTORNOS_PSICOLOGICOS, LIB_FICHA_CAMPO_MEDICACION_TRANSTORNOS_PSICOLOGICOS, LIB_FICHA_CAMPO_TIPO_DE_MEDICACION_TRANSTORNOS_PSICOLOGICOS, LIB_FICHA_CAMPO_COMPLEMENTOS_ALIMENTICIOS_TRANSTORNOS_PSICOLOGICOS, LIB_FICHA_CAMPO_COM_TRANSTORNOS_PSICOLOGICOS, LIB_FICHA_CAMPO_INTERVENCIONES_QUIRURJICAS, LIB_FICHA_CAMPO_PRESION_ARTERIAL, LIB_FICHA_CAMPO_MEDICIONES_PRESION_ARTERIAL, LIB_FICHA_CAMPO_COLESTEROL, LIB_FICHA_CAMPO_HDL, LIB_FICHA_CAMPO_LDL, LIB_FICHA_CAMPO_COLESTEROL_TOTAL, LIB_FICHA_CAMPO_TRIGLICERIDOS, LIB_FICHA_CAMPO_AÑADIR_INFORMACION_DE_OTROS_DATOS_ANALITICOS, LIB_FICHA_CAMPO_MOSTRAR_ANALITICA, LIB_FICHA_CAMPO_IMG_ANALITICA, LIB_FICHA_CAMPO_ALERGIAS, LIB_FICHA_CAMPO_ALERGIAS__ALIMENTICIAS, LIB_FICHA_CAMPO_ALERGIAS_MEDICAMENTOSAS, LIB_FICHA_CAMPO_ALERGIAS_OTRAS, LIB_FICHA_CAMPO_INTOLERANCIAS_ALIMENTICIAS, LIB_FICHA_CAMPO_OTRAS_INTOLERANCIAS, LIB_FICHA_CAMPO_CAMINAR, LIB_FICHA_CAMPO_DEPORTES, LIB_FICHA_CAMPO_DEPORTE_QUE_PRACTICA, LIB_FICHA_CAMPO_DESAYUNO, LIB_FICHA_CAMPO_HORA_DESAYUNO, LIB_FICHA_CAMPO_MÈDIA_MAÑANA, LIB_FICHA_CAMPO_HORARIO_MEDIA_MAÑANA, LIB_FICHA_CAMPO_COMIDA, LIB_FICHA_CAMPO_HORA_COMIDA, LIB_FICHA_CAMPO_MERIENDA, LIB_FICHA_CAMPO_HORA_MERIENDA, LIB_FICHA_CAMPO_CENA, LIB_FICHA_CAMPO_HORA_CENA, LIB_FICHA_CAMPO_CONSUMO_DE_LACTEOS, LIB_FICHA_CAMPO_CONSUMO_DE_FRUTA, LIB_FICHA_CAMPO_CONSUMO_DE_LEGUMBRES, LIB_FICHA_CAMPO_CONSUMO_DE_PASTA, LIB_FICHA_CAMPO_CONSUMO_DE_ARROZ, LIB_FICHA_CAMPO_CONSUMO_DE_VERDURA, LIB_FICHA_CAMPO_CONSUMO_DE_ENSALADA, LIB_FICHA_CAMPO_CONSUMO_DE_CARNE, LIB_FICHA_CAMPO_CONSUMO_DE_PESCADO, LIB_FICHA_CAMPO_CONSUMO_DIARIO_DE_AGUA, LIB_FICHA_CAMPO_INTENTAR_NO_INCLUIR_EN_LAS_DIETAS, LIB_FICHA_CAMPO_ANSIEDAD, LIB_FICHA_CAMPO_TIPO_DE_ANSIEDAD, LIB_FICHA_CAMPO_ANSIEDAD_OTROS, LIB_FICHA_CAMPO_EN_QUE_MOMENTO_DEL_DIA_SE_PRODUCTE_LA_ANSIEDAD, LIB_FICHA_CAMPO_WC, LIB_FICHA_CAMPO_WC_OTROS, LIB_FICHA_CAMPO_REGLAS, LIB_FICHA_CAMPO_REGLAS_OTRAS, LIB_FICHA_CAMPO_ALTURA, LIB_FICHA_CAMPO_VISITA, LIB_FICHA_CAMPO_HISTORICO, LIB_FICHA_CAMPO_IDDIETISTA, LIB_FICHA_CAMPO_IDCENTRO, LIB_FICHA_CAMPO_FILTRO
];

// Array campos copiables presion
var CAMPOS_PRESION = [
    LIB_PRESION_CAMPO_FECHA, LIB_PRESION_CAMPO_SISTOLICA, LIB_PRESION_CAMPO_DIASTOLICA, LIB_PRESION_CAMPO_SITUACION, LIB_PRESION_CAMPO_FILTRO, LIB_PRESION_CAMPO_IDFICHA, LIB_PRESION_CAMPO_IDDIETISTA
];

var cacheLinks = {};

function setLink(entrada, campo, entradaALinkar) {
    var cacheLink = getLink(entrada, campo);

    cacheLink.unshift(entradaALinkar);
    entrada.link(campo, entradaALinkar);

    cacheLinks[entrada.id + ' ' + campo] = cacheLink;
}

function removeLink(entrada, campo, entradaADesLinkar) {
    var cacheLink = getLink(entrada, campo);

    cacheLink = cacheLink.filter(function (el) {
        return el.id !== entradaADesLinkar.id;
    });
    entrada.unlink(campo, entradaADesLinkar);

    cacheLinks[entrada.id + ' ' + campo] = cacheLink;
}

function getLink(entrada, campo) {
    if (cacheLinks[entrada.id + ' ' + campo] == null) {
        cacheLinks[entrada.id + ' ' + campo] = entrada.field(campo);
    }

    return cacheLinks[entrada.id + ' ' + campo];
}

function getField(entrada, campo) {
    try {
        var valor = entrada.field(campo);
        // Si es un link cacheado
        if (cacheLinks[entrada.id + ' ' + campo] != null) {
            return getLink(entrada, campo);
        }
        return valor;
    } catch (e) {
        message(campo + ' - ' + e);
        message(campo + ' - ' + e);
        message(campo + ' - ' + e.stack);
        message(campo + ' - ' + e.stack);
        throw e;
    }
}


function getLibreria(libreria) {
    if (typeof libreria == 'string') {
        libreria = libByName(libreria);
    }
    return libreria;
}

function forEach(coleccion, funcion) {
    if (coleccion != null && coleccion.length != 0) {
        for (var i = 0; i < coleccion.length; i++) {
            funcion(coleccion[i], i);
        }
    }
}

function concertarVisita(ficha, fechaVisita) {
    if (ficha == null) {
        ficha = entry();
    }
    if (fechaVisita == null) {
        fechaVisita = new Date();
    }
    var objetoVisita = {};

    //objetoVisita[LIB_VISITA_CAMPO_FECHA_VISITA] = fechaVisita.getTime();
    objetoVisita[LIB_VISITA_CAMPO_SITUACION] = SITUACION_VISITA_CONCERTADA;

    var entradaMaestro = getField(ficha, LIB_FICHA_CAMPO_IDDIETISTA)[0];

    var visita = crearVisita(objetoVisita, ficha, LIB_FICHA_CAMPO_VISITA, entradaMaestro);

    visita.field(LIB_VISITA_CAMPO_FECHA_VISITA, fechaVisita);
}

function informarCentroEnFicha(centro) {
    if (centro == null) {
        centro = entry();
    }
    var campoLinkDestino = LIB_FICHA_CAMPO_IDCENTRO;
    var campoLink = LIB_CENTROS_CAMPO_FICHA_CLIENTE;
    var campoId = LIB_FICHA_CAMPO_IDPACIENTE;

    forEach(getField(centro, campoLink), function (entrada, i) {
        if (getField(entrada, campoId) == 0) {
            informarOrigenEntrada(centro, entrada, campoLinkDestino);
            var visita = getField(entrada, LIB_FICHA_CAMPO_VISITA)[0];
            informarOrigenEntrada(centro, visita, LIB_VISITA_CAMPO_DCENTRO);
        }
    });
}

function informarFichaEnPresion(ficha) {
    if (ficha == null) {
        ficha = entry();
    }
    var campoLinkDestino = LIB_PRESION_CAMPO_IDFICHA;
    var campoLink = LIB_FICHA_CAMPO_MEDICIONES_PRESION_ARTERIAL;
    var campoId = LIB_PRESION_CAMPO_IDPRESION;

    forEach(getField(ficha, campoLink), function (entrada, i) {
        if (getField(entrada, campoId) == 0) {
            informarOrigenEntrada(ficha, entrada, campoLinkDestino);
        }
    });
}

function informarVisitaEnComplementos(ficha) {
    if (visita == null) {
        visita = entry();
    }
    // var campoLinkDestino = LIB_PRESION_CAMPO_IDFICHA;
    // var campoLink = LIB_FICHA_CAMPO_MEDICIONES_PRESION_ARTERIAL;
    // var campoId = LIB_PRESION_CAMPO_IDPRESION;

    forEach(getField(visita, campoLink), function (entrada, i) {
        if (getField(entrada, campoId) == 0) {
            informarOrigenEntrada(visita, entrada, campoLinkDestino);
        }
    });
}

function informarVisitaEnDietas(visita) {
    if (visita == null) {
        visita = entry();
    }
    // var campoLinkDestino = LIB_PRESION_CAMPO_IDFICHA;
    // var campoLink = LIB_FICHA_CAMPO_MEDICIONES_PRESION_ARTERIAL;
    // var campoId = LIB_PRESION_CAMPO_IDPRESION;

    forEach(getField(visita, campoLink), function (entrada, i) {
        if (getField(entrada, campoId) == 0) {
            informarOrigenEntrada(visita, entrada, campoLinkDestino);
        }
    });
}

function crearFicha0EnCentro(centro) {
    var libreriaDestino = LIB_FICHA;
    var campoLinks = LIB_CENTROS_CAMPO_FICHA_CLIENTE;
    var campoLinkDestino = LIB_FICHA_CAMPO_IDCENTRO;
    var campoMaestro = LIB_CENTROS_CAMPO_IDDIETISTA;
    var campoMaestroDestino = LIB_FICHA_CAMPO_IDDIETISTA;
    var campoIdDestino = LIB_FICHA_CAMPO_IDPACIENTE;
    var objetoEntrada0 = {};

    objetoEntrada0[LIB_FICHA_CAMPO_IDPACIENTE] = 0;
    objetoEntrada0[LIB_FICHA_CAMPO_SITUACION] = SITUACION_NUEVO_REGISTRO;

    var funcionCompletarEntrada0 = completarFicha0;

    vincularEntrada0(centro, libreriaDestino, campoLinks, campoLinkDestino, campoMaestro, campoMaestroDestino, campoIdDestino, objetoEntrada0, funcionCompletarEntrada0);
}

function crearPresion0EnFicha(ficha) {
    var libreriaDestino = LIB_PRESION;
    var campoLinks = LIB_FICHA_CAMPO_MEDICIONES_PRESION_ARTERIAL;
    var campoLinkDestino = LIB_PRESION_CAMPO_IDFICHA;
    var campoMaestro = LIB_FICHA_CAMPO_IDDIETISTA;
    var campoMaestroDestino = LIB_PRESION_CAMPO_IDDIETISTA;
    var campoIdDestino = LIB_PRESION_CAMPO_IDPRESION;
    var objetoEntrada0 = {};

    objetoEntrada0[LIB_PRESION_CAMPO_IDPRESION] = 0;
    objetoEntrada0[LIB_PRESION_CAMPO_SITUACION] = SITUACION_NUEVO_REGISTRO;

    var funcionCompletarEntrada0 = null;

    vincularEntrada0(ficha, libreriaDestino, campoLinks, campoLinkDestino, campoMaestro, campoMaestroDestino, campoIdDestino, objetoEntrada0, funcionCompletarEntrada0);
}

/**
 * 
 * @param {Entry} entradaActual Entrada actual, entry() si es null
 * @param {String|Lib} libreriaDestino Libreria donde esta la entrada 0 (nombre o objeto)
 * @param {String} campoLink Campo de la entrada actual donde debe estar el link a la entrada 0
 * @param {String} campoLinkDestino Campo de la entrada 0 donde debe estar el link a la entrada actual
 * @param {String} campoMaestro Campo de la entrada actual que determina que entrada 0 debo buscar
 * @param {String} campoMaestroDestino Campo de la entrada 0 que determina que entrada 0 debo buscar
 * @param {String} campoIdDestino Campo identificador de la entrada destino
 * @param {Object} objetoEntrada0 Objeto con los campo/valores de la nueva entrada 0
 * @param {Function} funcionCompletarEntrada0 Funcion para completar la nueva entrada 0
 */
function vincularEntrada0(entradaActual, libreriaDestino, campoLink, campoLinkDestino, campoMaestro, campoMaestroDestino, campoIdDestino, objetoEntrada0, funcionCompletarEntrada0) {
    if (entradaActual == null) {
        entradaActual = entry();
    }
    libreriaDestino = getLibreria(libreriaDestino);

    var links = getField(entradaActual, campoLink);
    var contieneEntrada0 = false;

    var entradaMaestro = getField(entradaActual, campoMaestro)[0]

    var entradasDestino = libreriaDestino.linksTo(entradaMaestro);
    var entrada0 = null;

    forEach(entradasDestino, function (entradaDestino, i) {
        if (getField(entradaDestino, campoIdDestino) == 0) {
            entrada0 = entradaDestino;
        }
    });

    if (entrada0 != null) {
        forEach(links, function (link, i) {
            if (getField(link, campoIdDestino) == 0) {
                if (!contieneEntrada0 && link.id == entrada0.id) {
                    contieneEntrada0 = true;
                    // message('Contiene');
                } else {
                    removeLink(entradaActual, campoLink, link);
                }
            }
        });
    }

    if (!contieneEntrada0) {
        // message('No contiene');

        if (entrada0 == null) {

            entrada0 = crearEntrada(libreriaDestino, objetoEntrada0, funcionCompletarEntrada0, campoLinkDestino, entradaActual, campoLink, entradaMaestro, campoMaestroDestino);
        } else {

            informarOrigenEntrada(entradaActual, entrada0, campoLinkDestino)

            setLink(entradaActual, campoLink, entrada0);
            entradaActual.recalc();
        }

    }
}

function completarFicha0(centro, ficha0, entradaMaestro) {
    libreria = getLibreria(LIB_FICHA);
    ficha0 = libreria.findById(ficha0.id);
    crearVisita({}, ficha0, LIB_FICHA_CAMPO_VISITA, entradaMaestro);
    crearPresion0EnFicha(ficha0);
}

function completarVisita(ficha, visita, entradaMaestro) {
    try {
        setLink(visita, LIB_VISITA_CAMPO_DCENTRO, getField(ficha, LIB_FICHA_CAMPO_IDCENTRO)[0]);
    } catch (e) {
        message(e);
        message(e);
        message(e);
        throw e;
    }
}

function crearVisita(objetoEntrada, entradaPadre, campoLinkPadre, entradaMaestro) {
    return crearEntrada(LIB_VISITA, objetoEntrada, completarVisita, LIB_VISITA_CAMPO_DFICHPACIENTE, entradaPadre, campoLinkPadre, entradaMaestro, LIB_VISITA_CAMPO_DDIETISTA)
}

function crearEntrada(libreria, objetoEntrada, funcionCompletarEntrada, campoLink, entradaPadre, campoLinkPadre, entradaMaestro, campoMaestro) {
    libreria = getLibreria(libreria);
    var entrada = libreria.create(objetoEntrada);

    setLink(entrada, campoMaestro, entradaMaestro);
    setLink(entrada, campoLink, entradaPadre);
    setLink(entradaPadre, campoLinkPadre, entrada);

    entrada.recalc();
    entradaPadre.recalc();

    if (funcionCompletarEntrada != null) {
        entrada = libreria.findById(entrada.id);
        funcionCompletarEntrada(entradaPadre, entrada, entradaMaestro);
    }

    entrada.recalc();
    entradaPadre.recalc();

    return entrada;
}

function informarOrigenEntrada(entradaOrigen, entrada, campoLink) {
    if (entradaOrigen == null) {
        entradaOrigen = entry();
    }

    var links = getField(entrada, campoLink);

    forEach(links, function (link, i) {
        entrada.unlink(campoLink, link);
        //removeLink(entrada, campoLink, link);
    });

    entrada.link(campoLink, entradaOrigen);
    //setLink(entrada, campoLink, entradaOrigen);
    entrada.recalc();
}

function modificarFicha0(ficha) {
    var campoId = LIB_FICHA_CAMPO_IDPACIENTE;
    var campoLink = LIB_FICHA_CAMPO_IDCENTRO;
    var campoLinkPadre = LIB_CENTROS_CAMPO_FICHA_CLIENTE;
    var campoMaestro = LIB_FICHA_CAMPO_IDDIETISTA;
    var camposCopiar = CAMPOS_FICHA;
    var camposLinkHijos = [LIB_FICHA_CAMPO_VISITA, LIB_FICHA_CAMPO_MEDICIONES_PRESION_ARTERIAL];
    var camposHijos = [LIB_VISITA_CAMPO_DFICHPACIENTE, LIB_PRESION_CAMPO_IDFICHA];
    var campoSituacion = LIB_FICHA_CAMPO_SITUACION;
    var situacionDefecto = SITUACION_FICHA_DEFECTO;
    var funcionCompletarEntrada0 = completarFicha0;

    modificarEntrada0(ficha, campoId, campoLink, campoLinkPadre, campoMaestro, camposCopiar, camposLinkHijos, camposHijos, campoSituacion, situacionDefecto, funcionCompletarEntrada0);
}

function modificarPresion0(presion) {
    var campoId = LIB_PRESION_CAMPO_IDPRESION;
    var campoLink = LIB_PRESION_CAMPO_IDFICHA;
    var campoLinkPadre = LIB_FICHA_CAMPO_MEDICIONES_PRESION_ARTERIAL;
    var campoMaestro = LIB_PRESION_CAMPO_IDDIETISTA;
    var camposCopiar = CAMPOS_PRESION;
    var camposLinkHijos = [];
    var camposHijos = [];
    var campoSituacion = LIB_PRESION_CAMPO_SITUACION;
    var situacionDefecto = '';
    var funcionCompletarEntrada0 = null;

    modificarEntrada0(presion, campoId, campoLink, campoLinkPadre, campoMaestro, camposCopiar, camposLinkHijos, camposHijos, campoSituacion, situacionDefecto, funcionCompletarEntrada0);
}

/**
 * 
 * @param {Entry} entrada Entrada actual, entry() si es null
 * @param {String} campoId Campo identificador de la entrada 0
 * @param {String} campoLink Campo de la entrada 0 donde debe estar el link a la entrada padre
 * @param {String} campoLinkPadre Campo de la entrada padre donde debe estar el link a la entrada 0
 * @param {String} campoMaestro Campo de la entrada 0 que determina a quien pertenece la entrada 0
 * @param {String[]} camposLinkHijos Campos de la entrada 0 que apuntan a una entrada hijo que se debe actualizar
 * @param {String[]} camposHijos Campos de las entradas hijo que se debe actualizar
 * @param {String} campoSituacion Campo donde se almacena la situacion NUEVO_REGISTRO
 * @param {String} situacionDefecto Situacion por defecto si no es entrada 0
 * @param {Fucntion} funcionCompletarEntrada0 Funcion para completar la entrada 0
 */
function modificarEntrada0(entrada, campoId, campoLink, campoLinkPadre, campoMaestro, camposCopiar, camposLinkHijos, camposHijos, campoSituacion, situacionDefecto, funcionCompletarEntrada0) {
    if (entrada == null) {
        entrada = entry();
    }
    var libreria = lib();

    if (getField(entrada, campoId) == 0) {

        var entradaNueva = {};

        entradaNueva[campoId] = obtenerSiguienteId(libreria, campoId);

        entradaNueva = libreria.create(entradaNueva);

        var entradaPadre = getField(entrada, campoLink)[0];
        setLink(entradaPadre, campoLinkPadre, entradaNueva);

        var entradaMaestro = getField(entrada, campoMaestro)[0];

        forEach(camposCopiar, function (campo) {
            var valorCampo = getField(entrada, campo);
            if (valorCampo != null && valorCampo != []) {
                entradaNueva[campo] = getField(entrada, campo);
                if (valorCampo instanceof Array && valorCampo[0] != null) {
                    if (typeof valorCampo[0] == 'string') {
                        entradaNueva.set(campo, valorCampo);
                        entrada.set(campo, null);
                    } else {
                        forEach(valorCampo, function (entradaHijo) {
                            removeLink(entrada, campo, entradaHijo);
                            setLink(entradaNueva, campo, entradaHijo);

                            forEach(camposLinkHijos, function (campoLinkHijo, i) {
                                if (campo == campoLinkHijo) {
                                    removeLink(entradaHijo, camposHijos[i], entrada);
                                    setLink(entradaHijo, camposHijos[i], entradaNueva);
                                    entradaHijo.recalc();
                                }
                            });
                        });
                    }
                } else if (valorCampo instanceof Date) {
                    if (valorCampo.getTime() >= 0) {
                        entradaNueva.set(campo, valorCampo);
                    } else {
                        message(MSG_VUELVE_A_INTRODUCIR + campo);
                    }
                    entrada.set(campo, null);
                } else {
                    entradaNueva.set(campo, valorCampo);
                    entrada.set(campo, null);
                }
            }
        });


        if (getField(entradaNueva, campoSituacion) == SITUACION_NUEVO_REGISTRO) {
            entradaNueva.set(campoSituacion, situacionDefecto);
        }

        entrada.set(campoId, 0);
        entrada.set(campoSituacion, SITUACION_NUEVO_REGISTRO);
        setLink(entrada, campoMaestro, entradaMaestro);
        setLink(entrada, campoLink, entradaPadre);

        if (funcionCompletarEntrada0 != null) {
            entrada.recalc();
            entrada = libreria.findById(entrada.id);
            funcionCompletarEntrada0(entradaPadre, entrada, entradaMaestro);
        }

        entradaNueva.recalc();
        entradaNueva.show();

        message(MSG_GUARDADO);
    } else {
        if (getField(entrada, campoSituacion) == SITUACION_NUEVO_REGISTRO) {
            entrada.set(campoSituacion, situacionDefecto);
            entrada.recalc();
        }
    }

}


function obtenerSiguienteId(libreria, campoId) {
    libreria = getLibreria(libreria);

    var maxId = 0;

    var entradas = libreria.entries();
    forEach(entradas, function (entrada) {
        var num = getField(entrada, campoId);
        if (num > maxId) {
            maxId = num;
        }
    });

    return maxId + 1;
}


function helloWorld() {

    message('Hello World15!!');

}

var VERSION = '${VERSION-0.1.1}';

function version() {
    message(VERSION)
}
